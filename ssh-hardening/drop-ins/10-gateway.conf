# Copyright (c) 2025-2026 Marc Allgeier (fidpa)
# SPDX-License-Identifier: MIT
# https://github.com/fidpa/ubuntu-server-security
#
# Gateway SSH Override Configuration
# Purpose: Gateway/Router-specific SSH configuration overrides
# Deployment: /etc/ssh/sshd_config.d/10-gateway.conf
# Device Role: Network Gateway, Router, VPN Endpoint
#
# Rationale: Gateways need port forwarding capabilities for tunneling and VPN access

# ═══════════════════════════════════════════════════════════
# Port Forwarding (Gateway Feature)
# ═══════════════════════════════════════════════════════════

# Allow TCP forwarding (needed for VPN, tunnels, port forwarding)
# Override: base config disables this for security
AllowTcpForwarding yes

# Stream local forwarding (for VPN access)
AllowStreamLocalForwarding yes

# ═══════════════════════════════════════════════════════════
# Gateway-Specific Settings
# ═══════════════════════════════════════════════════════════

# Gateway ports (allow remote port forwarding from LAN)
# Use case: Access services on gateway from external clients
GatewayPorts clientspecified

# ═══════════════════════════════════════════════════════════
# Notes
# ═══════════════════════════════════════════════════════════

# These overrides enable:
# - VPN tunnel access (WireGuard management)
# - Port forwarding for services (Dashboard, monitoring tools)
# - Remote access to LAN services
#
# Security considerations:
# - AllowTcpForwarding: Required for gateway functionality
# - GatewayPorts: Limited to "clientspecified" (not "yes" - that's insecure)
# - All other hardening from base config remains active
#
# Use cases:
# - SSH tunnel to web service: ssh -L 8080:[GATEWAY_IP]:80 [USERNAME]@[GATEWAY_IP]
# - Port forwarding for monitoring: ssh -L 9090:localhost:9090 [USERNAME]@[GATEWAY_IP]
